"""
ì—ë„ˆì§€ ë¶„ì„ MCP ì„œë²„ ì‚¬ìš© ì˜ˆì‹œ

ì´ íŒŒì¼ì€ ì—ë„ˆì§€ ë¶„ì„ MCP ì„œë²„ì˜ ì£¼ìš” ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
"""

import asyncio
import pandas as pd
import numpy as np
from datetime import datetime, timedelta

async def example_energy_analysis():
    """ì—ë„ˆì§€ ë¶„ì„ ì˜ˆì‹œ"""
    print("ğŸ”‹ ì—ë„ˆì§€ ë¶„ì„ MCP ì„œë²„ ì‚¬ìš© ì˜ˆì‹œ")
    print("=" * 50)
    
    # 1. ìƒ˜í”Œ ì—ë„ˆì§€ ë°ì´í„° ìƒì„±
    print("\n1. ğŸ“Š ìƒ˜í”Œ ì—ë„ˆì§€ ë°ì´í„° ìƒì„±")
    sample_data = []
    base_time = datetime.now() - timedelta(days=30)  # 30ì¼ê°„ì˜ ë°ì´í„°
    
    for i in range(720):  # 30ì¼ * 24ì‹œê°„
        timestamp = base_time + timedelta(hours=i)
        hour = timestamp.hour
        day_of_week = timestamp.weekday()
        
        # ì‹œê°„ëŒ€ë³„ íŒ¨í„´
        hourly_pattern = 50 * np.sin(2 * np.pi * hour / 24)
        # ì£¼ê°„ íŒ¨í„´ (ì£¼ë§ì— ë” ë†’ì€ ì†Œë¹„)
        weekly_pattern = 20 if day_of_week < 5 else 40
        # ê³„ì ˆì„± (ì—¬ë¦„ì²  ë” ë†’ì€ ì†Œë¹„)
        seasonal_pattern = 30 * np.sin(2 * np.pi * timestamp.timetuple().tm_yday / 365)
        # ë…¸ì´ì¦ˆ
        noise = np.random.normal(0, 15)
        
        consumption = 100 + hourly_pattern + weekly_pattern + seasonal_pattern + noise
        temperature = 20 + 10 * np.sin(2 * np.pi * hour / 24) + np.random.normal(0, 2)
        humidity = 60 + 20 * np.sin(2 * np.pi * hour / 24) + np.random.normal(0, 5)
        
        sample_data.append({
            "datetime": timestamp.isoformat(),
            "consumption": max(0, consumption),
            "temperature": max(0, min(40, temperature)),
            "humidity": max(0, min(100, humidity))
        })
    
    print(f"âœ… {len(sample_data)}ê°œì˜ ìƒ˜í”Œ ë°ì´í„° ìƒì„± ì™„ë£Œ")
    
    # 2. ì‹œê³„ì—´ ë¶„ì„ ì˜ˆì‹œ
    print("\n2. ğŸ“ˆ ì‹œê³„ì—´ ë¶„ì„")
    print("   - íŠ¸ë Œë“œ ë¶„ì„: ì‹œê°„ì— ë”°ë¥¸ ì—ë„ˆì§€ ì†Œë¹„ íŒ¨í„´ ë¶„ì„")
    print("   - ê³„ì ˆì„± ë¶„ì„: ì¼ì¼/ì£¼ê°„/ì›”ê°„ íŒ¨í„´ ë¶„ì„")
    print("   - ì´ìƒì¹˜ íƒì§€: ë¹„ì •ìƒì ì¸ ì†Œë¹„ íŒ¨í„´ ì‹ë³„")
    print("   - ì—ë„ˆì§€ ì§€í‘œ: í‰ê· , í”¼í¬, íš¨ìœ¨ì„± ì§€í‘œ ê³„ì‚°")
    
    # 3. ì˜ˆì¸¡ ëª¨ë¸ë§ ì˜ˆì‹œ
    print("\n3. ğŸ”® ì˜ˆì¸¡ ëª¨ë¸ë§")
    print("   - ARIMA: í†µê³„ì  ì‹œê³„ì—´ ëª¨ë¸")
    print("   - Prophet: Facebookì˜ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸")
    print("   - LSTM: ë”¥ëŸ¬ë‹ ê¸°ë°˜ ì˜ˆì¸¡ ëª¨ë¸")
    print("   - ëª¨ë¸ ë¹„êµ: ì—¬ëŸ¬ ëª¨ë¸ì˜ ì„±ëŠ¥ ë¹„êµ")
    
    # 4. ëŒ€ì‹œë³´ë“œ ìƒì„± ì˜ˆì‹œ
    print("\n4. ğŸ“Š ëŒ€ì‹œë³´ë“œ ë° ê°€ì‹œí™”")
    print("   - ì‹œê³„ì—´ ì°¨íŠ¸: ì‹œê°„ì— ë”°ë¥¸ ì†Œë¹„ëŸ‰ ë³€í™”")
    print("   - ì˜ˆì¸¡ ì°¨íŠ¸: ê³¼ê±° ë°ì´í„°ì™€ ì˜ˆì¸¡ ê²°ê³¼ ë¹„êµ")
    print("   - ì—ë„ˆì§€ ëŒ€ì‹œë³´ë“œ: ì¢…í•©ì ì¸ ì—ë„ˆì§€ ë¶„ì„")
    print("   - ì´ìƒì¹˜ ì°¨íŠ¸: ì´ìƒì¹˜ê°€ í‘œì‹œëœ ì‹œê³„ì—´")
    
    # 5. ë‚ ì”¨ ë°ì´í„° ì—°ë™ ì˜ˆì‹œ
    print("\n5. ğŸŒ¤ï¸ ë‚ ì”¨ ë°ì´í„° ì—°ë™")
    print("   - í˜„ì¬ ë‚ ì”¨: ì‹¤ì‹œê°„ ë‚ ì”¨ ì •ë³´ ìˆ˜ì§‘")
    print("   - ë‚ ì”¨ ì˜ˆë³´: ë¯¸ë˜ ë‚ ì”¨ ì˜ˆì¸¡")
    print("   - ê³¼ê±° ë‚ ì”¨: ê³¼ê±° ë‚ ì”¨ ë°ì´í„°")
    print("   - ìƒê´€ê´€ê³„ ë¶„ì„: ë‚ ì”¨ì™€ ì—ë„ˆì§€ ì†Œë¹„ì˜ ê´€ê³„")
    
    # 6. ì—ë„ˆì§€ íŠ¹í™” ë¶„ì„ ì˜ˆì‹œ
    print("\n6. âš¡ ì—ë„ˆì§€ íŠ¹í™” ë¶„ì„")
    print("   - í”¼í¬ ìˆ˜ìš” ë¶„ì„: ìµœëŒ€ ìˆ˜ìš” ì‹œì  ë° íŒ¨í„´")
    print("   - íš¨ìœ¨ì„± ë¶„ì„: ì—ë„ˆì§€ ì‚¬ìš© íš¨ìœ¨ì„± í‰ê°€")
    print("   - íŒ¨í„´ ë¶„ì„: ì‹œê°„ëŒ€ë³„/ìš”ì¼ë³„ ì‚¬ìš© íŒ¨í„´")
    print("   - ì ˆì•½ ì ì¬ë ¥: ì—ë„ˆì§€ ì ˆì•½ ê°€ëŠ¥ì„± ê³„ì‚°")
    
    # 7. ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬ ì˜ˆì‹œ
    print("\n7. ğŸ’¾ ë°ì´í„° ì €ì¥ ë° ê´€ë¦¬")
    print("   - ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥: SQLite ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥")
    print("   - CSV/JSON ë‚´ë³´ë‚´ê¸°: ë‹¤ì–‘í•œ í˜•ì‹ìœ¼ë¡œ ë‚´ë³´ë‚´ê¸°")
    print("   - ë¶„ì„ ê²°ê³¼ ì €ì¥: ë¶„ì„ ê²°ê³¼ë¥¼ íŒŒì¼ë¡œ ì €ì¥")
    print("   - ë°ì´í„° ë¡œë“œ: ì €ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°")
    
    # 8. ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤
    print("\n8. ğŸ¯ ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤")
    print("   ì‹œë‚˜ë¦¬ì˜¤ 1: ìŠ¤ë§ˆíŠ¸ ë¹Œë”© ì—ë„ˆì§€ ê´€ë¦¬")
    print("   - ì‹¤ì‹œê°„ ì—ë„ˆì§€ ì†Œë¹„ ëª¨ë‹ˆí„°ë§")
    print("   - í”¼í¬ ì‹œê°„ëŒ€ ìµœì í™”")
    print("   - ë‚ ì”¨ ê¸°ë°˜ ì—ë„ˆì§€ ì˜ˆì¸¡")
    print("   - íš¨ìœ¨ì„± ê°œì„  ê¶Œì¥ì‚¬í•­")
    
    print("\n   ì‹œë‚˜ë¦¬ì˜¤ 2: ì¬ìƒ ì—ë„ˆì§€ í†µí•©")
    print("   - íƒœì–‘ê´‘/í’ë ¥ ë°œì „ëŸ‰ ì˜ˆì¸¡")
    print("   - ì—ë„ˆì§€ ìˆ˜ìš” ì˜ˆì¸¡")
    print("   - ê·¸ë¦¬ë“œ ì•ˆì •ì„± ë¶„ì„")
    print("   - ì—ë„ˆì§€ ì €ì¥ ìµœì í™”")
    
    print("\n   ì‹œë‚˜ë¦¬ì˜¤ 3: ì—ë„ˆì§€ ë¹„ìš© ìµœì í™”")
    print("   - ì‹œê°„ëŒ€ë³„ ìš”ê¸ˆ ë¶„ì„")
    print("   - í”¼í¬ ìˆ˜ìš” ê´€ë¦¬")
    print("   - ì—ë„ˆì§€ ì ˆì•½ ê³„íš ìˆ˜ë¦½")
    print("   - ROI ë¶„ì„")
    
    # 9. MCP í´ë¼ì´ì–¸íŠ¸ ì—°ë™ ì˜ˆì‹œ
    print("\n9. ğŸ”— MCP í´ë¼ì´ì–¸íŠ¸ ì—°ë™")
    print("   Claude Desktop ì„¤ì •:")
    print("   ```json")
    print("   {")
    print('     "mcpServers": {')
    print('       "energy-analysis": {')
    print('         "command": "python",')
    print('         "args": ["/path/to/energy-analysis-mcp/server.py"],')
    print('         "env": {')
    print('           "OPENWEATHER_API_KEY": "your_api_key"')
    print("         }")
    print("       }")
    print("     }")
    print("   }")
    print("   ```")
    
    print("\nğŸ‰ ì—ë„ˆì§€ ë¶„ì„ MCP ì„œë²„ ì‚¬ìš© ì˜ˆì‹œ ì™„ë£Œ!")
    print("ğŸ“š ìì„¸í•œ ì‚¬ìš©ë²•ì€ README.mdë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.")

if __name__ == "__main__":
    asyncio.run(example_energy_analysis())




